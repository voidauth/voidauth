<ngx-spinner bdColor="rgba(0,0,0,0.9)" size="large" color="#fff" type="square-jelly-box" [fullScreen]="true">
  <p style="color: white">Loading...</p>
</ngx-spinner>

<div class="container" style="min-height: 100%">
  <app-header (toggleSidenav)="drawer.toggle()"></app-header>
  <mat-drawer-container class="container">
    <mat-drawer (click)="drawer.close()" #drawer position="end">
      <mat-nav-list>
        @if (user && user.isPrivileged) {
          <div mat-subheader>{{ user.username }}</div>
          <a mat-list-item routerLink="/"><mat-icon fontSet="material-icons-round" matListItemIcon>account_circle</mat-icon>Profile</a>
          <mat-divider></mat-divider>

          @if (isAdmin) {
            <div mat-subheader>Admin</div>
            <a mat-list-item routerLink="/admin/clients"
              ><mat-icon fontSet="material-icons-round" matListItemIcon>security</mat-icon>OIDC</a
            >
            <a mat-list-item routerLink="/admin/domains"
              ><mat-icon fontSet="material-icons-round" matListItemIcon>domain</mat-icon>ProxyAuth</a
            >
            <a mat-list-item routerLink="/admin/users"
              ><mat-icon fontSet="material-icons-round" matListItemIcon>supervised_user_circle</mat-icon>Users</a
            >
            <a mat-list-item routerLink="/admin/groups"><mat-icon fontSet="material-icons-round" matListItemIcon>group</mat-icon>Groups</a>
            <a mat-list-item routerLink="/admin/invitations"
              ><mat-icon fontSet="material-icons-round" matListItemIcon>mail</mat-icon>Invitations</a
            >
            <a mat-list-item routerLink="/admin/passwordresets"
              ><mat-icon fontSet="material-icons-round" matListItemIcon>lock_reset</mat-icon>Password Resets</a
            >
            <a mat-list-item routerLink="/admin/emails"
              ><mat-icon fontSet="material-icons-round" matListItemIcon>outbox</mat-icon>Sent Mail</a
            >
            <mat-divider></mat-divider>
          }
        }
        <a mat-list-item [href]="host + '/oidc/session/end'"
          ><mat-icon fontSet="material-icons-round" matListItemIcon>logout</mat-icon>Logout</a
        >
      </mat-nav-list>
    </mat-drawer>

    <div class="container">
      <router-outlet />
    </div>
  </mat-drawer-container>
</div>
