<h1>{{ "reset-password.title" | translate }}</h1>
<mat-card class="form-card">
  <mat-card-content>
    <form [formGroup]="passwordForm">
      <app-password-set
        style="width: 100%; margin-top: 0px"
        [newPassword]="passwordForm.controls.newPassword"
        [confirmPassword]="passwordForm.controls.confirmPassword"
      >
      </app-password-set>

      <mat-card-actions>
        <button
          mat-flat-button
          type="button"
          (click)="send()"
          [disabled]="!passwordForm.enabled || !passwordForm.valid || !passwordForm.dirty"
        >
          {{ "reset-password.actions.reset-password" | translate }}
        </button>
        @if (passkeySupport?.enabled) {
          <app-text-divider text="or"></app-text-divider>
          <button mat-flat-button type="button" (click)="registerPasskey()">
            {{
              "reset-password.actions.enable-passkey"
                | translate: { platformName: passkeySupport?.platformName ?? ("passkey-title" | translate) }
            }}
            <mat-icon fontSet="material-icons-round" matSuffix>{{ passkeySupport?.platformIcon ?? "key" }}</mat-icon>
          </button>
        }
      </mat-card-actions>
    </form>
  </mat-card-content>
</mat-card>

<span style="flex-grow: 1"></span>

@if (config?.contactEmail; as contactEmail) {
  <a style="margin-top: 48px" mat-button [href]="'mailto:' + contactEmail">{{ "contact-us.actions.label" | translate }}</a>
}
